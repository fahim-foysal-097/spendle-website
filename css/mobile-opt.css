/* mobile-opt.css
   Mobile-focused performance overrides.
   Applies only for small viewports or when .mobile-optimized is present.
*/

@media (max-width: 640px), (pointer: coarse) {
  /* hide decorative blobs (expensive filters & animations) */
  .bg-blobs {
    display: none !important;
  }

  /* images: natural sizing, no forced rasterization */
  .gallery-card img,
  .screenshot,
  #modalImage {
    image-rendering: auto;
    will-change: auto;
    max-height: none;
    height: auto;
  }

  /* modal backdrop: no blur, lighter overlay */
  .modal-backdrop {
    position: fixed;
    inset: 0;
    z-index: 1050;
    background: rgba(6, 10, 25, 0.55) !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }

  /* modal content: no blur, rounded corners */
  .modal-content.bg-transparent {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    border-radius: 12px;
  }

  /* shorten dialog open/close */
  .modal.fade .modal-dialog {
    transition: transform 120ms ease, opacity 120ms ease !important;
  }

  /* modal image: fast fade */
  #modalImage {
    transition: opacity 120ms linear !important;
    opacity: 1 !important;
  }

  /* page fade transitions: shorter */
  body.fade-in,
  body.fade-out {
    transition: opacity 100ms ease !important;
  }

  /* disable full-page blur on modal open, keep darkening only */
  #site-root.blurred {
    filter: brightness(0.88) !important;
    transition: filter 0.18s ease !important;
    pointer-events: none;
    user-select: none;
  }

  /* navbar: reduce blur & drop shadow for better perf */
  .navbar-glass {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    background: rgba(12, 22, 48, 0.8) !important;
    box-shadow: none !important;
    border: 1px solid rgba(255, 255, 255, 0.05) !important;
    transition: none !important; /* kill navbar transitions */
  }

  /* nav toggle */
  .navbar-collapse,
  .navbar-collapse.collapse,
  .navbar-toggler,
  .nav-open,
  .navbar {
    transition: none !important;
  }

  /* report button: lighter and smaller */
  .btn-report {
    right: 10px !important;
    bottom: 10px !important;
    padding: 8px 10px !important;
    box-shadow: 0 4px 12px rgba(6, 10, 25, 0.45) !important;
  }

  /* scroll reveal transitions: keep but shorten */
  section,
  .hero,
  .container {
    transition: opacity 180ms ease, transform 180ms ease !important;
    will-change: opacity, transform;
  }

  /* accessibility: reduced motion */
  @media (prefers-reduced-motion: reduce) {
    * {
      transition: none !important;
      animation-duration: 0.001ms !important;
      animation-iteration-count: 1 !important;
    }
  }
}

/* Helper class usable via JS to force mobile-optimized behavior outside the media query */
body.mobile-optimized .bg-blobs {
  display: none !important;
}
body.mobile-optimized .modal-backdrop {
  background: rgba(6, 10, 25, 0.55) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}
body.mobile-optimized .modal-content.bg-transparent {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}
body.mobile-optimized section,
body.mobile-optimized .hero,
body.mobile-optimized .container {
  transition: opacity 180ms ease !important;
  transform: none !important;
}
body.mobile-optimized .gallery-card img,
body.mobile-optimized .screenshot {
  will-change: auto !important;
}
body.mobile-optimized .navbar-glass {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  background: rgba(12, 22, 48, 0.8) !important;
  box-shadow: none !important;
}
